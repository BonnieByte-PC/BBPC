<footer class="site-footer">
<!-- test -->
  <div class="container footer-inner footer-grid">

    <!-- Column 1: Explore -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <img class="footer-header-icon" src="/images/icons/explore.svg">
        <span class="orbitron">Explore</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>
      <ul class="footer-links footer-col-content">
        <li><a href="/">Home</a></li>
        <li><a href="/products/">Products</a></li>
        <li><a href="/#why">Why BonnieByte</a></li>
        <li><a href="/#story">Our Story</a></li>
        <li><a href="/#notify">Updates</a></li>
      </ul>
    </div>

    <!-- Column 2: Tools -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <img class="footer-header-icon" src="/images/icons/tools.svg">
        <span class="orbitron">Tools</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>
      <ul class="footer-links footer-col-content">
        <li><a href="/tools/airflow/">Airflow Calculator</a></li>
      </ul>
    </div>

    <!-- Column 3: Legal -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <img class="footer-header-icon" src="/images/icons/legal.svg">
        <span class="orbitron">Legal</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>

      <ul class="footer-links footer-col-content">
        <li><a href="/legal/privacy-policy">Privacy Policy</a></li>
        <li><a href="/legal/cookie-policy">Cookie Policy</a></li>
        <li><a href="/legal/terms">Terms of Service</a></li>
        <li><a href="/legal/returns">Returns & Refunds</a></li>
        <li><a href="/legal/shipping">Shipping Policy</a></li>
        <li><a href="/warranty/">Warranty</a></li>
        <li><a href="/legal/cookie-policy#bbpc-reset-cookie-consent">Change Cookie Settings</a></li>
      </ul>
    </div>

    <!-- Column 4: Social -->
    <div class="footer-col footer-animate">
      <button class="footer-col-header" aria-expanded="false">
        <?xml version="1.0" encoding="utf-8"?>
        <!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
        <!-- License: PD. Made by Templarian: https://github.com/Templarian/WindowsIcons -->
        <svg class="bb-icon footer-header-icon"width="800px" height="800px" viewBox="0 0 76 76" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" baseProfile="full" enable-background="new 0 0 76.00 76.00" xml:space="preserve">
        	<path stroke-width="3" stroke-linejoin="round" d="M 38,17C 40.9455,17 43.3333,19.3878 43.3333,22.3333C 43.3333,25.2788 40.9455,27.6667 38,27.6667C 35.0545,27.6667 32.6667,25.2788 32.6667,22.3333C 32.6667,19.3878 35.0545,17 38,17 Z M 32.6666,34.3834C 31.9555,34.7389 30.7833,37.8333 31.4262,38.2501L 27.964,37.6132C 30.3193,36.76 30.7911,35.3344 30.9823,32.7335L 30.8009,31.1163C 31.5744,30.4725 32.7185,29.0501 33.7333,29.0502L 42.2666,29.0502C 43.3037,29.0501 44.2149,29.4913 44.9999,30.1593L 45.4999,32.0001C 45.4999,34.1736 47.1556,34.8271 48.886,35.8798L 46.4666,35.8292C 45.8376,35.8068 45.2551,35.9483 44.7188,36.2059C 44.2645,35.4252 43.7029,34.5682 43.3333,34.3834L 43.4534,37.0835C 41.1956,39.1569 40.0666,43.0679 40.0666,43.0679L 39.6764,45.0053L 38.5333,45.05C 37.7661,45.05 37.0129,44.99 36.2782,44.8745C 35.6933,43.3208 34.4183,40.5162 32.4533,39.2079L 32.6666,34.3834 Z M 24.7333,26.95C 27.6789,26.95 30.0667,29.3378 30.0667,32.2833C 30.0667,35.2288 27.6789,37.6167 24.7333,37.6167C 21.7878,37.6167 19.4,35.2288 19.4,32.2833C 19.4,29.3378 21.7878,26.95 24.7333,26.95 Z M 19.4,44.3333C 18.6889,44.6889 17.2667,47.5333 17.2667,47.5333C 17.2667,47.5333 16.5556,48.6 16.2,52.8666L 13,51.8L 14.0667,46.4667C 14.0667,46.4667 16.2,39 20.4666,39.0001L 28.9999,39.0001C 33.2667,39 35.4,46.4667 35.4,46.4667L 36.4666,51.8L 33.2667,52.8667C 32.9111,48.6 32.2001,47.5333 32.2001,47.5333C 32.2001,47.5333 30.7778,44.6889 30.0667,44.3333L 30.4976,54.0204C 28.8762,54.6529 27.112,55 25.2667,55C 23.0173,55 20.8884,54.4843 18.9918,53.5646L 19.4,44.3333 Z M 51.7333,24.931C 54.6788,25.0359 57.0667,27.5087 57.0667,30.4542C 57.0667,33.3997 54.6788,35.7025 51.7333,35.5977C 48.7878,35.4928 46.4,33.02 46.4,30.0745C 46.4,27.129 48.7878,24.8262 51.7333,24.931 Z M 46.4,42.1245C 45.6889,42.4547 44.2667,45.2485 44.2667,45.2485C 44.2667,45.2485 43.5556,46.2898 43.2,50.5438L 40,49.3632L 41.0667,44.0679C 41.0667,44.0679 43.2,36.6772 47.4666,36.8292L 55.9999,37.133C 60.2667,37.2848 62.4,44.8274 62.4,44.8274L 63.4666,50.1988L 60.2667,51.1515C 59.9111,46.8722 59.2001,45.7802 59.2001,45.7802C 59.2001,45.7802 57.7778,42.8851 57.0667,42.5042L 57.4976,52.2067C 55.8762,52.7814 54.112,53.0657 52.2667,53C 50.0173,52.9199 47.8884,52.3284 45.9918,51.3412L 46.4,42.1245 Z "/>
        </svg>
        <span class="orbitron">Social</span>
        <span class="footer-accordion-arrow">▾</span>
      </button>

      <ul class="footer-links footer-col-content footer-social-vertical">
        <li>
          <a href="https://instagram.com/bonniebytepc" target="_blank">
            <img class="footer-icon" src="/images/icons/instagram.svg">
            Instagram
          </a>
        </li>

        <li>
          <a href="https://tiktok.com/@bonniebytepc" target="_blank">
            <img class="footer-icon" src="/images/icons/tiktok.svg">
            TikTok
          </a>
        </li>

        <li>
          <a href="https://twitter.com/bonniebytepc" target="_blank">
            <img class="footer-icon" src="/images/icons/x.svg">
            Twitter / X
          </a>
        </li>

        <li>
          <a href="https://facebook.com/bonniebytepc" target="_blank">
            <img class="footer-icon" src="/images/icons/facebook.svg">
            Facebook
          </a>
        </li>
      </ul>
    </div>

  </div>

  <div class="container footer-bottom">
    <div class="footer-brand">
      <a href="/" aria-label="BonnieByte PC - Home">
        <picture>
          <source srcset="/images/LogoTag.webp" type="image/webp">
          <img src="/images/LogoTag.png" alt="BonnieByte PC" class="header-logo-img">
        </picture>
      </a>
      <p class="footer-brand-text">
        Beautiful, high-performance PC cooling crafted with Scottish pride.
      </p>
    </div>

    <p>
      <strong>Email:</strong> <a href="mailto:hello@bonniebytepc.com">hello@bonniebytepc.com</a> &nbsp;|&nbsp;
      <strong>Support:</strong> <a href="mailto:support@bonniebytepc.com">support@bonniebytepc.com</a>
    </p>

    <p>&copy; <span id="footer-year"></span> <span class="orbitron notranslate">BonnieByte PC</span>. All rights reserved.</p>
  </div>

  <!-- FOOTER SCRIPTS (unchanged) -->
  <script>
    document.querySelectorAll(".footer-col-header").forEach(header => {
        header.setAttribute("type", "button");
    
        header.addEventListener("click", (ev) => {
            ev.preventDefault();
            ev.stopPropagation();
    
            const expanded = header.getAttribute("aria-expanded") === "true";
            const content = header.nextElementSibling;
    
            header.setAttribute("aria-expanded", !expanded);
    
            if (!expanded) {
                content.style.maxHeight = content.scrollHeight + "px";
            } else {
                content.style.maxHeight = "0px";
            }
        });
    });
  </script>
  
  <script>
      document.addEventListener("DOMContentLoaded", () => {
        const walker = document.createTreeWalker(document.body, NodeFilter.SHOW_TEXT);
        let node;
      
        while (node = walker.nextNode()) {
          if (node.nodeValue.includes("BonnieByte PC")) {
            const span = document.createElement("span");
            span.className = "brand-name";
            span.textContent = "BonnieByte PC";
            node.parentNode.replaceChild(span, node);
          }
        }
      });
  </script>

<!-- ============================================================
     BONNIEBYTE PC — STABILITY-PATCHED SAFARI TRANSLATION ENGINE
=============================================================== -->

<!-- Google translate container -->
<div id="google_translate_element" style="position:absolute; left:-9999px; top:-9999px;"></div>
  
<script>
/* ---------- 1. Initialize widget ---------- */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,gd,fr,de,es,it,pt,pl,nl,sv,fi,ja,ko,zh-CN,zh-TW,no,da,cs,hu,ro,el,tr,uk,ar,hi',
      autoDisplay: false
  }, 'google_translate_element');
}

/* ---------- 2. Hard iframe reset ---------- */
function resetTranslateIframe() {
    document.querySelectorAll("iframe.goog-te-menu-frame, iframe.goog-te-gadget")
      .forEach(f => f.remove());
}

/* ---------- 3. Reload Google script ---------- */
function reloadTranslateScript() {
    const old = document.querySelector('script[src*="translate.google.com"]');
    if (old) old.remove();

    const s = document.createElement("script");
    s.src = "//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit";
    s.async = true;
    document.head.appendChild(s);
}

/* ---------- 4. Safe translate wrapper ---------- */
function safeTranslate(lang) {
    if (!lang) return;

    let attempts = 0;
    const max = 50;
    let applied = false;

    function attempt() {
        attempts++;

        // Inline combo
        const combo = document.querySelector(".goog-te-combo");
        if (combo) {
            combo.value = lang;
            combo.dispatchEvent(new Event("change"));
            applied = true;
        }

        // Iframe combo
        const iframe = document.querySelector("iframe.goog-te-menu-frame");
        if (iframe) {
            try {
                const inner = iframe.contentDocument?.querySelector(".goog-te-combo");
                if (inner) {
                    inner.value = lang;
                    inner.dispatchEvent(new Event("change"));
                    applied = true;
                }
            } catch(e) {}
        }

        if (applied) {
            verifyTranslation(lang);
            return;
        }

        if (attempts < max) {
            return setTimeout(attempt, 100);
        }

        resetTranslateIframe();
        reloadTranslateScript();
        setTimeout(() => attempt(), 300);

        if (attempts > max * 2) {
            showTranslationError(lang);
        }
    }

    attempt();
}

/* Use safeTranslate instead of old doGTranslate */
function doGTranslate(lang) {
    safeTranslate(lang);
}

/* ---------- 5. Verify translation (content check) ---------- */
function verifyTranslation(lang) {
    if (lang === "en") return;

    const sample = document.body.innerText.slice(0, 600).toLowerCase();
    const markers = [" warranty ", " support ", " product ", " bonniebyte "];

    const translated = !markers.some(m => sample.includes(m));

    if (!translated) {
        setTimeout(() => {
            const check = document.body.innerText.slice(0, 600).toLowerCase();
            const ok = !markers.some(m => check.includes(m));
            if (!ok) showTranslationError(lang);
        }, 800);
    }
}

/* ---------- 6. Error banner ---------- */
function showTranslationError(lang) {
    // If user previously disabled the message, skip
    try {
        if (BBCookies.get("bb_hide_translate_error") === "1") return;
    } catch(e){}

    // Do not duplicate banner
    if (document.getElementById("translation-error-banner")) return;

    // Detect iOS Safari
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    const isIOS = /iPad|iPhone|iPod/.test(ua);
    const isSafari = /^((?!chrome|android).)*safari/i.test(ua);
    const isIOSSafari = isIOS && isSafari;

    const iosLine = isIOSSafari
        ? `<span style="opacity:0.8; font-size:0.8rem;">iOS Safari may block translation occasionally.</span>`
        : ``;

    // Create banner
    const banner = document.createElement("div");
    banner.id = "translation-error-banner";
    banner.style.position = "fixed";
    banner.style.bottom = "20px";
    banner.style.left = "50%";
    banner.style.transform = "translateX(-50%)";
    banner.style.background = "rgba(0,0,0,0.88)";
    banner.style.border = "2px solid #66aaff";
    banner.style.padding = "14px 18px";
    banner.style.borderRadius = "10px";
    banner.style.color = "#fff";
    banner.style.zIndex = "999999";
    banner.style.fontSize = "0.9rem";
    banner.style.boxShadow = "0 0 14px rgba(102,170,255,0.55)";
    banner.style.fontFamily = "Inter, sans-serif";
    banner.style.display = "flex";
    banner.style.gap = "18px";
    banner.style.alignItems = "center";
    banner.style.maxWidth = "90%";
    banner.style.flexWrap = "wrap";

    banner.innerHTML = `
        <div style="display:flex; flex-direction:column; line-height:1.25; flex:1;">
            <span>Automatic translation is temporarily unavailable.</span>
            ${iosLine}
            <label style="margin-top:6px; font-size:0.78rem; opacity:0.9;">
                <input type="checkbox" id="bb-hide-msg" style="margin-right:6px;">
                Don't show this again
            </label>
        </div>

        <button id="retry-translate" style="
            background:#66aaff; color:#000; border:none;
            padding:6px 12px; border-radius:6px; cursor:pointer;
            font-size:0.85rem; font-weight:600;">
            Retry
        </button>

        <button id="bb-close-translate-banner" style="
            background:none; border:none; color:#fff;
            font-size:1.2rem; cursor:pointer; padding:4px;">
            ✕
        </button>
    `;

    document.body.appendChild(banner);

    // Close function shared by both interactions
    function closeBanner() {
        const hide = document.getElementById("bb-hide-msg").checked;
        if (hide) {
            try {
                BBCookies.set("bb_hide_translate_error", "1", 365);
            } catch(e){}
        }

        banner.style.opacity = "0";
        banner.style.transition = "opacity 0.35s ease";
        setTimeout(() => banner.remove(), 350);
    }

    // Retry button behaviour
    document.getElementById("retry-translate").onclick = () => {
        closeBanner();

        let last = lang;
        try { last = BBCookies.get("bb_lang") || lang; } catch(e){}
        safeTranslate(last);
    };

    // Close button behaviour
    document.getElementById("bb-close-translate-banner").onclick = closeBanner;

    // Auto-hide after 12 seconds unless user hovered or interacted
    setTimeout(() => {
        if (document.getElementById("translation-error-banner")) {
            closeBanner();
        }
    }, 12000);
}
</script>

<!-- Google Script Loader -->
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script>
/* KEEP THIS — hides Google banner */
function hideGoogleBar() {
    const frame = document.querySelector("iframe.goog-te-banner-frame");
    if (frame) frame.style.display = "none";
    const skip = document.querySelector(".skiptranslate");
    if (skip) skip.style.display = "none";
    document.documentElement.style.top = "0px";
}

setInterval(hideGoogleBar, 200);
window.addEventListener("load", hideGoogleBar);
</script>

</footer>
